#!/usr/bin/env python3
import datetime
import json
import os

import pytz

ZULIP_PATH = os.path.join(os.path.dirname(os.path.abspath(__file__)), "../../")
OUT_PATH = os.path.join(ZULIP_PATH, "static", "generated", "timezones.json")

timezone_values = {
    timezone: {
        "abbreviation": pytz.timezone(timezone)
        .localize(datetime.datetime.now(), is_dst=False)
        .tzname()
    }
    for timezone in pytz.all_timezones
}

with open(OUT_PATH, "w") as f:
    json.dump({"timezones": timezone_values}, f)
