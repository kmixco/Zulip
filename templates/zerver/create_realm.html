{% extends "zerver/portico_signup.html" %}
{# Home page for not logged-in users. #}

{# This is where we pitch the app and solicit signups. #}

{% block portico_content %}
<script type="text/javascript">
$(function () {
    common.autofocus('#email');
    {% if recaptcha_sitekey %}
    // Ideally, we shouldn't need to do this, but for some reason, reCAPTCHA
    // doesn't recognize the callback if we directly assign
    // recaptcha.on_submit to 'data-callback'.
    window.recaptcha_callback = recaptcha.on_submit;
    recaptcha.init('send_confirm');
    {% endif %}
});
</script>

<div class="app register-page">
    <div class="app-main register-page-container new-style flex full-page center">

        <div class="register-form left">
            <div class="lead">
                <h1 class="get-started">{{ _("Create a new Zulip organization") }}</h1>
            </div>
            <form class="form-inline" id="send_confirm" name="email_form"
                action="{{ current_url() }}" method="post">
                {{ csrf_input }}
                {% if recaptcha_sitekey %}
                <div id='recaptcha' class="g-recaptcha"
                    data-sitekey="{{ recaptcha_sitekey }}"
                    data-callback="recaptcha_callback"
                    data-size="invisible">
                </div>
                {% endif %}

                <div class="input-box horizontal">
                    <div class="inline-block relative">
                        <input type="text" class="email required" placeholder="{{ _("Enter your email address") }}"
                               id="email" name="email" required />
                        <label for="id_username">{{ _('Email') }}</label>
                    </div>

                    <button type="submit" class="new-organization-button register-button">{{ _("Create organization") }}</button>
                </div>
            </form>
            <div class="alert alert-error"></div>
            {% if form.email.errors %}
                {% for error in form.email.errors %}
                <div class="alert alert-error">{{ error }}</div>
                {% endfor %}
            {% endif %}
            {% if form.errors.__all__ %}
                {% for error in form.errors.__all__ %}
                <div class="alert alert-error">{{ error }}</div>
                {% endfor %}
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
